cmake_minimum_required(VERSION 3.16.3)

enable_language(CUDA)

project(evspikesim
	VERSION 0.2.0
	LANGUAGES C CUDA)

add_library(evspikesim STATIC
  src/gpu/fc_layer.cu
  src/fc_layer_params.c
  src/network.c
  src/random.c
  src/spike_list.c)

target_include_directories (evspikesim PUBLIC inc)

#set_target_properties(evspikesim PROPERTIES CUDA_SEPARABLE_COMPILATION ON)
#set_target_properties(evspikesim PROPERTIES CUDA_RESOLVE_DEVICE_SYMBOLS ON)

install(TARGETS evspikesim DESTINATION lib)
install(FILES
  inc/fc_layer.h
  inc/fc_layer_params.h
  inc/layer_type.h
  inc/network.h
  inc/random.h
  inc/spike_list.h
  DESTINATION include/evspikesim)
